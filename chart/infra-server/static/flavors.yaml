##########
#  demo  #
##########
- id: demo
  name: StackRox Demo
  description: Demo running StackRox 3.0.52.0
  availability: default
  workflow: configuration/workflow-demo.yaml
  parameters:
    - name: name
      description: cluster name
      value: example1

    - name: main-image
      value: stackrox.io/main:3.0.52.0
      kind: hardcoded

    - name: k8s-version
      value: default
      kind: hardcoded

  artifacts:
    - name: kubeconfig
      description: Kube config for connecting to cluster

    - name: tfstate
      description: Terraform state file

    - name: url
      description: URL of StackRox UI
      tags: [url]

    - name: roxctl
      tags: [internal]

#############
#  qa-demo  #
#############
- id: qa-demo
  name: StackRox Demo for QA testing
  description: TESTING ONLY - Demo running a provided StackRox version
  availability: alpha
  workflow: configuration/workflow-qa-demo.yaml
  parameters:
    - name: name
      description: cluster name
      value: example1

    - name: main-image
      description: StackRox Central image Docker name
      value: stackrox.io/main:3.0.52.0
      help: This must be a fully qualified image e.g. docker.io/stackrox/main:3.0.52.0

    - name: scanner-image
      description: StackRox Scanner image Docker name
      kind: optional
      help: If unspecified, this will be derived from the central image

    - name: scanner-db-image
      description: StackRox Scanner DB image Docker name
      kind: optional
      help: If unspecified, this will be derived from the central image

    - name: k8s-version
      description: kubernetes version
      value: default
      kind: optional

  artifacts:
    - name: kubeconfig
      description: Kube config for connecting to cluster

    - name: tfstate
      description: Terraform state file

    - name: url
      description: URL of StackRox UI
      tags: [url]

    - name: roxctl
      tags: [internal]

#################
#  gke-default  #
#################
- id: gke-default
  name: GKE Default
  description: GKE cluster running the default version
  availability: stable
  workflow: configuration/workflow-gke-default.yaml
  parameters:
    - name: name
      description: cluster name
      value: example1

    - name: nodes
      description: number of nodes
      value: "3"
      kind: optional

    - name: machine-type
      description: node machine type
      value: e2-standard-4
      kind: optional

    - name: k8s-version
      description: kubernetes version
      value: latest
      kind: optional

    - name: pod-security-policy
      description: Enables the pod security policy admission controller for the cluster
      value: false
      kind: optional

    - name: gcp-image-type
      description: The GCP image type to use for the cluster
      value: ubuntu
      kind: optional

  artifacts:
    - name: kubeconfig
      description: Kube config for connecting to cluster

    - name: connect
      description: Shell script for connecting to clusters


####################
#  openshift-lite  #
####################
- id: openshift-lite
  name: OpenShift Single Node
  description: Single-node OpenShift cluster
  availability: alpha
  workflow: configuration/workflow-openshift-lite.yaml
  parameters:
    - name: name
      description: cluster name
      value: example1

#####################
#  openshift-multi  #
#####################
- id: openshift-multi
  name: OpenShift Multi Node
  description: Multi-node CRI-O OpenShift cluster
  availability: alpha
  workflow: configuration/workflow-openshift-multi.yaml
  parameters:
    - name: name
      description: cluster name
      value: example1

    - name: crio
      description: should CRI-O be used as the container runtime
      value: true

#############
#  example  #
#############
- id: example
  name: Example
  description: Example flavor for testing
  availability: alpha
  workflow: configuration/workflow-example.yaml
  parameters:
    - name: create-sleep
      description: time in seconds for create to take
      value: 30
      kind: optional

    - name: create-success
      description: should create succeed or fail
      value: true
      kind: optional

    - name: destroy-sleep
      description: time in seconds for destroy to take
      value: 30
      kind: optional

    - name: destroy-success
      description: should destroy succeed or fail
      value: true
      kind: optional

#####################
#  AWS EKS          #
#####################
- id: eks
  name: EKS
  description: AWS EKS cluster
  availability: alpha
  workflow: configuration/workflow-eks.yaml
  parameters:
    - name: name
      description: cluster name
      value: example1

    - name: user-arns
      description: AWS user ARNs that will get access to the cluster
      value: arn:aws:iam::393282794030:user/joey@stackrox.com

    - name: nodes
      description: number of nodes
      value: "2"
      kind: optional

    - name: machine-type
      description: node machine type
      value: m5.xlarge
      kind: optional

    - name: k8s-version
      description: kubernetes version
      kind: optional
      help: Use this to override the default version used by EKS

#####################
#  AWS KOPS         #
#####################
- id: kops
  name: KOPS on AWS
  description: A cluster created with KOPS on AWS
  availability: alpha
  workflow: configuration/workflow-kops.yaml
  parameters:
    - name: name
      description: cluster name
      value: example1

    - name: kops-version
      description: KOPS version
      value: 1.18.1
      kind: optional

    - name: k8s-version
      description: kubernetes version (must be <= KOPS version)
      value: 1.18.1
      kind: optional

    - name: master-count
      description: number of master nodes (must be odd number)
      value: "1"
      kind: optional

    - name: master-instance-type
      description: EC2 instance type for k8s masters
      value: c5.large
      kind: optional

    - name: node-count
      description: number of nodes in the cluster
      value: "3"
      kind: optional

    - name: node-instance-type
      description: EC2 instance type for k8s nodes
      value: c5.xlarge
      kind: optional

    - name: cni
      description: K8s network plugin to use
      value: calico
      kind: optional

    - name: region
      description: AWS region
      value: us-east-1
      kind: optional

