---

apiVersion: v1
kind: ConfigMap

metadata:
  name: argo-workflow-controller-configmap
  namespace: argo

data:
  config: |
    artifactRepository:
      gcs:
        bucket: argo-artifacts-development
        serviceAccountKeySecret:
          name: gcs-credentials
          key: credentials.json

    # Default values that will apply to all Workflows from this controller, unless overridden on the Workflow-level
    workflowDefaults:
      metadata:
        annotations:
          argo: workflows
      spec:
        ttlStrategy:
          secondsAfterCompletion: 86400
          secondsAfterSuccess: 86400
          secondsAfterFailure: 86400

---

apiVersion: v1
kind: Secret

metadata:
  name: gcs-credentials
  namespace: default

data:
  credentials.json: |-
    {{- include "require-file" (list "google-calendar-credentials.json" .) | b64enc | nindent 4 }}

---
